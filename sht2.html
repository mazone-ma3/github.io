<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" name="" content="text/html; charset=UTF-8">
<title>m@3レトロパソコン記念館 シューティングゲームテスト2</title>
</head>
<body bgcolor="#FFFFDD">
<!--NOBR-->
<!--S--><!--U--><!--FONT COLOR="BLUE"-->
m@3レトロパソコン記念館  シューティングゲームテスト2 Project RAIN<br>
(2023/11/9別ページ化)<br>
<hr>
<A HREF="https://github.com/mazone-ma3/PRJ_RAIN">GitHub</A>に上げてあります。<BR>
(ディスクイメージじゃないのでコンパイル後のオブジェクトと各binフォルダ以下をL3 DiskExplorerやeditdisk(DiskExplorer)などの操作ツールで入れて下さい)<br>
<hr>
<B>[内容・履歴]</B><BR>
MSX2/turboR <font color="RED">(2023/11/27更新)</font> / 微高速化版 <font color="RED">(2024/10/3更新-)</font><br>
C64 表示テスト版 <font color="RED">(2023/12/15更新)</font><br>
Pyxel(<A HREF="py">別ページ</A>)<br>
X68000 <font color="RED">(2025/6/14-更新)</font> MSX2標準パレットの.SC5形式ファイルを引数に指定するとラスタースクロールします(XSP未使用時)<br>
FM TOWNS <font color="RED">(2025/6/16-更新)</font>
<hr>
<a href="https://webmsx.org/?MACHINE=MSX2PJ&amp;DISKA_URL=https://mazone-ma3.github.io/github.io/IMAGE/RAIN.ZIP">MSX2</a> WebMSXで実行
<hr>
<b>[わかってる不具合]</b><br>
弾が当たってないところで敵にヒットする(X68000、FM TOWNSも)心当たりはなくもない。<br>
ゲームオーバー時、画面にゴミが書き込まれる<br>
Eの文字が消し残る<br>
<font color="RED">遅い。</font>内部16bitにして真面目に画面左側のクリッピングまでやってるので余計に。<br>
実機+ブラウン管だとちらつく。対策なし<br>
<br>
<font color="RED">DOS版が終了時に飛ぶようです。</font>現時点で対策なし。→コンパイラのせいだった模様。(2024/8/30)<br>
<br>
5面でフリーズ。一応調べるけどもう直さないかも。(2024/11/20)→調べた。<br><br>
BGMが止まる。(X68000版)原因不明。(2025/6/23)<br><br>
<b>[やり残し]</b><br>
敵キャラデータ追加<br>
タイトル追加<br>
背景描いてあるけど別ゲームにするかも<br>
移植しない<br><br>
<hr>
<b>[解説?]</b>(2025/6/28)<br>
MSX2版はCでもturboRでなくても動くものをと思い作り始めて弾数制限を極力かけたり一部アセンブラで書いたりしましたがそれでも遅すぎて断念。フルアセンブラなら常時60fps出せそうな内容ですが。<br>
システムは前作の流用、ドット絵は何十年前に描いたもの、曲も何十年前に書いたものですです。ドット絵は使ってるのは描いた一部です。ボスが前作より小さくなったのはご愛敬。元から16x16の当たり判定しかなかったけど。<br>
以下X68000とFM TOWNSについて。前作との違いとしてはスプライトデータをMSX2の.SC5で読んでいます。テストプログラムとして上げてあるソースの流用です。<br>
X68000のBG面用PCGパターンに収まるようにMSX2版から画像ファイルを修正しています。<br>
簡易サウンドドライバは以前作った物の流用ですが音色定義の部分を後の版では修正してあります。ウエイト足りないかとIOCSやBIOS経由に変更しましたがまだ時々止まります。<br>
X68000の後から付けたラスタースクロールは4ラスタ(2ライン)おきです。XSP使用設定時は実装していません。elf2x68k用のXSPはelf2x68kのサンプルにあります。<br>
最初の版はプライオリティを整理してなかったのですが後からPyxel、FM TOWNSと同様になるように修正してあります。<br>
FM TOWNSは16色モードは円筒スクロールなのでスクロール機能はやめてドットを直接書いてます。ドットもパックドピクセルなのでX68000と違ってとりあえず2ドットおきで動かしてます。<br>
ラスタースクロールさせる気はありません。そうでなくてもTOWNSの割り込みは鬼門。その鬼門をVSYNCとサウンドで使っています。VSYNCは色々試して簡易EOIで動くのでそうしてますがおかしくなる可能性があります。<br>
TOWNS gccのspr.hは手元のにはinteとか書いてある簡単なバグがあるのでリコンパイル時は修正してください。ライブラリのFM音源の出力関数にも簡単なバグがあったので別関数を実装しています。<br>
簡易とはいえサウンドドライバまで実装した例はTOWNS gccでは他には知りません。<br>
<br>
安地が当初あったので後の版では弾の発射タイミングをいじってあります。<br>
技術的には集大成かもしれませんというか自分の能力の限界。実機で動作確認するのも手間だしいつ壊れるかもなのでもうやらないと思います。<br>
<br>
付けようとしてたタイトルが既にあちこちで使われていたので断念したのですがProject RAINもあちこちで使われているという。<br>
<br>
ソース整理してなくて読みにくいけど素材です。フリーで出回ってるコンパイラ、エミュレータ、イメージで動かせるので色々いじってみてください。<br>
<br>
<a href="index.html">[戻]</a><br>
</body>
</html>
